<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Profile</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" href="/stylesheets/uberLogin.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
      <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
      <script src="http://maps.google.com/maps/api/js?v=3.exp&libraries=places"></script>
      <script src="http://rawgit.com/allenhwkim/angularjs-google-maps/master/build/scripts/ng-map.min.js"></script>
      <script type="text/javascript" src="/angular/userHistory.js"></script>
      <style>
      /*CSS Copied from viewBill-Start*/
      * { margin: 0; padding: 0;}
         body { font: 14px/1.4 Georgia, serif; }
         #page-wrap { width: 800px; margin: 0 auto; }
         textarea { border: 0; font: 14px Georgia, Serif; overflow: hidden; resize: none; }
      table { border-collapse: collapse; }
         table td, table th { border: 1px solid black; padding: 5px; }
         #myModalLabel { height: 15px; width: 100%; margin: 20px 0; background: #222; text-align: center; color: white; font: bold 15px Helvetica, Sans-Serif; text-decoration: uppercase; letter-spacing: 20px; padding: 0px 0px; }
         #address { width: 250px; height: 150px; float: left; }
         #customer { overflow: hidden; }
         #logo { text-align: right; float: right; position: relative; margin-top: 25px; border: 1px solid #fff; max-width: 540px; max-height: 100px; overflow: hidden; }
         #logo:hover, #logo.edit { border: 1px solid #000; margin-top: 0px; max-height: 125px; }
         #logoctr { display: none; }
         #logo:hover #logoctr, #logo.edit #logoctr { display: block; text-align: right; line-height: 25px; background: #eee; padding: 0 5px; }
         #logohelp { text-align: left; display: none; font-style: italic; padding: 10px 5px;}
         #logohelp input { margin-bottom: 5px; }
         .edit #logohelp { display: block; }
         .edit #save-logo, .edit #cancel-logo { display: inline; }
         .edit #image, #save-logo, #cancel-logo, .edit #change-logo, .edit #delete-logo { display: none; }
         #customer-title { font-size: 20px; font-weight: bold; float: left; }
         #meta { margin-top: 1px; width: 300px; float: right; }
         #meta td { text-align: right;  }
         #meta td.meta-head { text-align: left; background: #eee; }
         #meta td textarea { width: 100%; height: 20px; text-align: right; }
         #items { clear: both; width: 100%; margin: 30px 0 0 0; border: 1px solid black; }
         #items th { background: #eee; }
         #items textarea { width: 80px; height: 50px; }
         #items tr.item-row td { border: 0; vertical-align: top; }
         #items td.description { width: 300px; }
         #items td.item-name { width: 175px; }
         #items td.description textarea, #items td.item-name textarea { width: 100%; }
         #items td.total-line { border-right: 0; text-align: right; }
         #items td.total-value { border-left: 0; padding: 10px; }
         #items td.total-value textarea { height: 20px; background: none; }
         #items td.balance { background: #eee; }
         #items td.blank { border: 0; }
         #terms { text-align: center; margin: 20px 0 0 0; }
         #terms h5 { text-transform: uppercase; font: 13px Helvetica, Sans-Serif; letter-spacing: 10px; border-bottom: 1px solid black; padding: 0 0 8px 0; margin: 0 0 8px 0; }
         #terms textarea { width: 100%; text-align: center;}
         textarea:hover, textarea:focus, #items td.total-value textarea:hover, #items td.total-value textarea:focus, .delete:hover { background-color:#EEFF88; }
         .delete-wpr { position: relative; }
         .delete { display: block; color: #000; text-decoration: none; position: absolute; background: #EEEEEE; font-weight: bold; padding: 0px 3px; border: 1px solid; top: -6px; left: -22px; font-family: Verdana; font-size: 12px; }
         html, body {
         height: 100%;
         margin: 0;
         padding: 0;
         }

      /*CSS copied from viewBill-End*/

         .pac-container {
         z-index: 1050;
         }
         .navbar-brand {
         position: absolute;
         left: 50%;
         margin-left: -50px !important;  /* 50% of your logo width */
         display: block;
         }
         .nav-navbar{
         text-align:center;
         }
         /*CSS for map info-window-Start*/
         #map-canvas {
         margin: 0;
         padding: 0;
         height: 200px;
         width: 300px;
         }
         .gm-style-iw {
         /*width: 350px !important;*/
         top: 10px !important;
         left: 0px !important;
         background-color: #fff;
         box-shadow: 0 1px 6px rgba(178, 178, 178, 0.6);
         border: 1px solid rgba(72, 181, 233, 0.6);
         border-radius: 10px 10px 10px 10px;
         }
         #iw-container {
         margin-bottom: 5px;
         }
         #iw-container .iw-title {
         font-family: 'Open Sans Condensed', sans-serif;
         font-size: 22px;
         font-weight: 400;
         padding: 10px;
         background-color: #48b5e9;
         color: white;
         margin: 0;
         border-radius: 2px 2px 0 0;
         }
         #iw-container .iw-content {
         font-size: 13px;
         line-height: 18px;
         font-weight: 400;
         margin-right: 1px;
         padding: 10px 5px 10px 5px;
         max-height: 200px;
         overflow-y: auto;
         overflow-x: hidden;
         }
         .iw-content img {
         float: right;
         margin: 0 5px 5px 10px; 
         }
         .iw-subTitle {
         font-size: 16px;
         font-weight: 400;
         padding: 5px 0;
         }
         .iw-bottom-gradient {
         position: absolute;
         width: 410px;
         height: 25px;
         bottom: 10px;
         right: 18px;
         background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
         background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
         background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
         background: -ms-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);
         }
         /*CSS for map info-window-End*/   
      </style>
   </head>
   <body ng-app="uber">
      <nav class="navbar navbar-inverse" style="min-height: 80px;">
         <div class="container-fluid">
            <div class="navbar-header">
               <a class="navbar-brand" href="#">
                  <h1>U B E R</h1>
               </a>
            </div>
            <div>
               <ul class="nav navbar-nav navbar-right">
                  <li>
                     <a href="/logout">
                        <h3><span class="glyphicon glyphicon-log-out"></span>Logout</h3>
                     </a>
                  </li>
               </ul>
            </div>
         </div>
      </nav>
      <div class="" ng-controller="userHistoryController">
        <div ng-include src="'sidebar.ejs'"></div>
         <div class="col-md-10">
            <div class="table-responsive">
               <table class="table table-bordered">
                  <thead>
                     <tr>
                        <th>Date</th>
                        <th>Driver Name</th>
                        <th>Start Location</th>
                        <th>End Location</th>
                        <th>Duration</th>
                        <th>Distance travelled</th>
                        <th>view bill</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr ng-repeat="bill in billList">
                        <td>{{ bill.date }}</td>
                        <td>{{ bill.driverfirstname}} {{bill.driverlastname }}</td>
                        <td>{{ bill.pickUpLocation }}</td>
                        <td>{{ bill.dropOffLocation }}</td>
                        <td>{{ bill.Duration }}</td>
                        <td>{{ bill.distance_travelled }}</td>
                        <td align="center">
                           <button ng-click="viewBill(bill)" class="btn btn-lg" data-toggle="modal" data-target="#addLifeEventModal">
       					   <span>View Bill</span>
   					       </button>
                        </td>
                     </tr>
                  </tbody>
               </table>

               <div class="modal fade" id="addLifeEventModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" >
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header" style="background-color:#222; color: white;">
                    
                    <h4 class="modal-title" id="myModalLabel">RIDE INVOICE<button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color:white"><span aria-hidden="true">&times;</span></button></h4>
                  </div>         
                  <table style="border:0px; width:100%">
                     <tr style="border:0px">
                        <td style="border:0px">
                           <div id="identity">
                           <div id="address">DriverName : {{rideSelected.driverfirstname}} {{rideSelected.driverlastname}}
                              </br>Phone: {{rideSelected.driverphone}}
                              </br>Ride Date : {{rideSelected.date}}
                              
                           </br>
                              </br>Source : {{rideSelected.pickUpLocation}}
                              </br>Destination : {{rideSelected.dropOffLocation}}
                           </div>
                           </div>
                        </td>
                        <td style="border:0px; padding:0px">
                           <div  id="map-canvas">
                              <map  id="map"  zoom="20" ng-model="map"  style="height:100%"></map>
                           </div>
                        </td>
                     </tr>
                  </table>
                  
                   
                  <!-- <div id="map">Source :</br><p>destination:</p></div> -->
                  
                  <div style="clear:both"></div>
                  <br><br><br>
                  <div id="customer">
                     <p id="customer-title">Ride Cost : ${{rideSelected.price | number:2}}</p>
                     <table id="meta">
                        <tr>
                           <td class="meta-head">Distance</td>
                           <td>
                              <p>{{rideSelected.distance_travelled | number:2}}Miles</p>
                           </td>
                        </tr>
                        <tr>
                           <td class="meta-head">Duration</td>
                           <td>
                              <p id="date">{{rideSelected.Duration}}</p>
                           </td>
                        </tr>
                        <tr>
                           <td class="meta-head">Average Speed</td>
                           <td>
                              <div class="due">{{rideSelected.speed | number:3}}mph</div>
                           </td>
                        </tr>
                     </table>
                  </div>
                  <table id="items">
                     <tr>
                        <td colspan="2" class="blank"> </td>
                        <td colspan="2" class="total-line">Base Fare</td>
                        <td class="total-value">
                           <div id="subtotal">${{rideSelected.base | number:2}}</div>
                        </td>
                        <td colspan="2" class="blank"> </td>
                        <td colspan="2" class="total-line">Total Fare</td>
                        <td class="total-value">
                           <div id="subtotal">${{rideSelected.price | number:2}}</div>
                        </td>
                     </tr>
                     <tr>
                        <td colspan="2" class="blank"> </td>
                        <td colspan="2" class="total-line">Distance Fare</td>
                        <td class="total-value">
                           <div id="total">${{rideSelected.distance_constance*rideSelected.distance_travelled | number:2}}</div>
                        </td>
                        <td colspan="2" class="blank"> </td>
                        <td colspan="2" class="total-line">Billed to card</td>
                        <td class="total-value">
                           <div id="total">${{rideSelected.price | number:2}}</div>
                        </td>
                     </tr>
                     <tr>
                        <td colspan="2" class="blank"> </td>
                        <td colspan="2" class="total-line">Time</td>
                        <td class="total-value">
                           <p id="paid">${{rideSelected.time_constant | number:2}}</p>
                        </td>
                        <td colspan="2" class="blank"> </td>
                        <td colspan="2" class="total-line">Outstanding Balance</td>
                        <td class="total-value">
                           <p id="paid">$0.00</p>
                        </td>
                     </tr>
                  </table>
                  <div id="terms">
                     <h5>Terms</h5>
                     <p>Prices may vary based on availabiliy and time</p>
                  </div>

                </div>
              </div>
            </div>

            </div>
         </div>
      </div>
   </body>
</html>